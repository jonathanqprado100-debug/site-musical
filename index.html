<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Detecção de Voz com Piano</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.min.js"></script>
  <script src="script.js" type="module" defer></script>
</head>
<body>
  <div class="container">

    <h1>🎤 Detecção de Voz com Piano</h1>

    <!-- Botão único de tema -->
    <div style="text-align:center; margin-bottom:15px;">
      <button class="btn-aula btn-tema">🌗 Alternar Tema</button>
    </div>

    <!-- Botão para ir para aula -->
    <div style="text-align:center; margin-bottom:15px;">
      <button id="btnIrAula" class="btn-aula">🎓 Ir para a Aula</button>
    </div>

    <!-- Seção Principal -->
    <div id="interfacePrincipal">

      <!-- Microfone -->
      <section class="microfone">
        <h2>Detectar nota cantada</h2>
        <div class="controls">
          <button id="btnComecar" class="btn-aula">Começar detecção</button>
          <button id="btnParar" class="btn-aula">Parar detecção</button>
        </div>
        <p id="notaCantada">Nota cantada: --</p>
        <label for="gainKnob">Ajuste de ganho do microfone</label>
        <div id="nivelSinalContainer">
          <input id="gainKnob" type="range" min="0" max="2" step="0.01" value="1">
          <div id="nivelSinal"></div>
        </div>
      </section>

      <!-- Piano funcional -->
      <section class="piano-section">
        <h2>Piano (C2 - C6)</h2>
        <div id="pianoContainer"></div>
      </section>

      <!-- Visualização de notas por oitava -->
      <section class="notas-oitavas">
        <h2>Notas por Oitava</h2>
        <div id="oitavasContainer"></div>
      </section>

    </div>

    <!-- Seção da Aula -->
    <div id="aulaMusica" style="display:none; margin-top:20px;">
      <div style="text-align:center; margin-bottom:15px;">
        <button id="btnVoltar" class="btn-aula">⬅ Voltar</button>
      </div>

      <h2>🎶 Como a Música Funciona: Um Guia Simples e Direto</h2>
      <div class="aula-conteudo">

        <div class="aula-card">
          <h3>1. Notas Musicais: Os Blocos da Música</h3>
          <p>As notas são como letras do alfabeto musical. Existem sete principais:<br>
          • Dó, Ré, Mi, Fá, Sol, Lá, Si</p>
          <p>Essas notas se repetem em diferentes alturas (sons mais graves ou mais agudos). No sistema internacional, elas também são chamadas por letras:<br>
          • C (Dó), D (Ré), E (Mi), F (Fá), G (Sol), A (Lá), B (Si)</p>
          <p>🔹 Exemplo: A nota Lá (ou A) é usada como referência para afinar instrumentos. Ela tem uma frequência de 440 Hz — é como o “ponto de partida” do som.</p>
        </div>

        <div class="aula-card">
          <h3>2. 🎹 Como as Notas se Conectam ao Piano</h3>
          <p>O piano tem teclas brancas e pretas. Cada tecla representa uma nota. As teclas brancas seguem a sequência Dó-Ré-Mi-Fá-Sol-Lá-Si. As pretas são variações chamadas sustenidos (#) ou bemóis (♭).</p>
          <p>🔹 Exemplo visual: Se você encontrar duas teclas pretas juntas, a tecla branca à esquerda delas é o Dó. A partir daí, você pode identificar todas as outras notas.</p>
        </div>

        <div class="aula-card">
          <h3>3. 🧵 Melodia: A Linha que Costura as Notas</h3>
          <p>A melodia é uma sequência de notas tocadas uma após a outra. É o que você canta ou reconhece numa música.</p>
          <p>🔹 Exemplo: Na música “Parabéns pra Você”, a melodia começa com:<br>
          Dó, Dó, Ré, Dó, Fá, Mi</p>
        </div>

        <div class="aula-card">
          <h3>4. 🌈 Tom: O Clima da Música</h3>
          <p>O tom define o “ambiente emocional” da música. Ele é baseado na nota principal e na escala usada.</p>
          <p>• Tom maior: som alegre, aberto<br>
             • Tom menor: som mais introspectivo ou triste</p>
          <p>🔹 Exemplo: Uma música em Lá maior soa vibrante. Uma música em Lá menor soa mais melancólica.</p>
        </div>

        <div class="aula-card">
          <h3>5. 🪜 Escalas: A Escada das Notas</h3>
          <p>A escala é uma sequência organizada de notas. A mais comum é a escala maior, que segue este padrão de distância entre notas:<br>
          Tom – Tom – Semitom – Tom – Tom – Tom – Semitom</p>
          <p>🔹 Exemplo: A escala de Dó maior tem:<br>
          Dó, Ré, Mi, Fá, Sol, Lá, Si, Dó</p>
        </div>

        <div class="aula-card">
          <h3>6. 🎨 Harmonia: O Fundo da Pintura Musical</h3>
          <p>A harmonia acontece quando várias notas são tocadas ao mesmo tempo, formando acordes. Ela dá profundidade à melodia.</p>
          <p>🔹 Exemplo: Se a melodia está cantando a nota Mi, o acompanhamento pode tocar um acorde de Dó maior (Dó, Mi, Sol).</p>
        </div>

        <div class="aula-card">
          <h3>7. 🔍 Como Identificar Notas e Acordes</h3>
          <p>• No piano, cada tecla tem um nome.<br>
             • As notas se repetem em padrões.<br>
             • Os acordes são grupos de 3 ou mais notas que “soam bem juntas”.</p>
          <p>🔹 Exemplo de acorde:<br>
          Dó maior = Dó + Mi + Sol<br>
          Lá menor = Lá + Dó + Mi</p>
        </div>

      </div>
    </div>

  </div>
</body>
</html>
